<!-- filepath: c:\Users\HP\Major_Project\biblequest\accounts\templates\accounts\bible_view.html -->
{% extends 'accounts/base.html' %}

{% block title %}Bible{% endblock %}

{% block content %}
<div class="content">
    <h2>Bible</h2>
    <form method="get" action="{% url 'bible_view' %}">
        <!-- Testament Selection -->
        <label for="testament">Testament:</label>
        <select id="testament" name="testament" onchange="this.form.submit()">
            <option value="">Select Testament</option>
            <option value="Old Testament" {% if testament == "Old Testament" %}selected{% endif %}>Old Testament</option>
            <option value="New Testament" {% if testament == "New Testament" %}selected{% endif %}>New Testament</option>
        </select>

        <!-- Book Selection -->
        {% if books %}
            <label for="book">Book:</label>
            <select id="book" name="book" onchange="this.form.submit()">
                <option value="">Select Book</option>
                {% for book_name in books.keys %}
                    <option value="{{ book_name }}" {% if book == book_name %}selected{% endif %}>{{ book_name }}</option>
                {% endfor %}
            </select>
        {% endif %}

        <!-- Chapter Selection -->
        {% if chapters %}
            <label for="chapter">Chapter:</label>
            <select id="chapter" name="chapter" onchange="this.form.submit()">
                <option value="">Select Chapter</option>
                {% for chapter_number in chapters %}
                    <option value="{{ chapter_number }}" {% if chapter|add:0 == chapter_number %}selected{% endif %}>{{ chapter_number }}</option>
                {% endfor %}
            </select>
        {% endif %}

        <button type="submit" class="btn btn-primary">Get Bible Text</button>
    </form>

    <div class="bible-result">
        {% if error_message %}
            <div class="alert alert-danger">
                {{ error_message }}
            </div>
        {% else %}
            {% if chapter %}
                <h3>{{ book }} Chapter {{ chapter }}</h3>
                <ul>
                    {% for verse in bible_data %}
                        <li><strong>{{ verse.verse }}:</strong> {{ verse.text }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
        {% endif %}
    </div>

    <!-- Navigation Buttons -->
    <div class="navigation-buttons">
        <button onclick="history.back()" class="btn btn-secondary">Back</button>
        <a href="{% url 'home' %}" class="btn btn-primary">Home Page</a>
    </div>
</div>
{% endblock %}